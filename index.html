import React, { useState } from 'react';

// Mock Data based on your XML structure for demonstration
const mockXMLData = [
  { id: 1, time: '00:01', player: '74. Garfield-Reid', action: 'Pass (Back)' },
  { id: 2, time: '00:04', player: '33. Amponsah', action: 'Pass (Forward, Long)' },
  { id: 3, time: '00:14', player: '38. Baiera', action: 'Throw in' },
  { id: 4, time: '00:17', player: '23. Murray', action: 'Pass (Lateral)' },
  { id: 9, time: '00:31', player: '71. Molinari', action: 'Interception' },
  { id: 47, time: '03:27', player: '80. Klein', action: 'Save (Reflex)' },
];

const MatchAnalysisDashboard = () => {
  const [activeTab, setActiveTab] = useState('actions'); // 'actions' or 'insights'
  const [coachNotes, setCoachNotes] = useState('');

  // --- FC360 Minimalist Styles ---
  const styles = {
    container: {
      display: 'flex',
      height: '100vh', // Full screen height
      fontFamily: 'Inter, Arial, sans-serif',
      backgroundColor: '#f4f4f4',
    },
    videoSection: {
      flex: 3, // Takes up 75% of width
      backgroundColor: '#000',
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      position: 'relative',
    },
    sidebar: {
      flex: 1, // Takes up 25% of width
      backgroundColor: '#fff',
      borderLeft: '1px solid #e0e0e0',
      display: 'flex',
      flexDirection: 'column',
      maxWidth: '400px',
      minWidth: '300px',
    },
    header: {
      padding: '20px',
      borderBottom: '1px solid #eee',
    },
    tabButton: {
      padding: '10px 20px',
      border: 'none',
      background: 'none',
      cursor: 'pointer',
      fontSize: '14px',
      fontWeight: '600',
      color: '#888',
      borderBottom: '2px solid transparent',
      marginRight: '10px',
    },
    activeTab: {
      color: '#000',
      borderBottom: '2px solid #000',
    },
    listContainer: {
      flex: 1,
      overflowY: 'auto', // Scrollable
      padding: '0',
    },
    listItem: {
      padding: '15px 20px',
      borderBottom: '1px solid #f0f0f0',
      cursor: 'pointer',
      transition: 'background 0.2s',
      display: 'flex',
      justifyContent: 'space-between',
      alignItems: 'center',
    },
    listItemHover: {
      backgroundColor: '#f9f9f9',
    },
    timeTag: {
      fontSize: '12px',
      color: '#666',
      backgroundColor: '#eee',
      padding: '4px 8px',
      borderRadius: '4px',
      marginRight: '12px',
    },
    playerText: {
      fontWeight: 'bold',
      fontSize: '14px',
      display: 'block',
      marginBottom: '4px',
    },
    actionText: {
      fontSize: '12px',
      color: '#555',
    },
    textArea: {
      width: '100%',
      height: '150px',
      padding: '10px',
      borderRadius: '6px',
      border: '1px solid #ddd',
      resize: 'none',
      fontFamily: 'inherit',
      marginTop: '15px',
    },
    insightCard: {
      backgroundColor: '#f8f9fa',
      padding: '15px',
      borderRadius: '8px',
      marginBottom: '15px',
      border: '1px solid #eee',
    }
  };

  return (
    <div style={styles.container}>
      
      {/* LEFT: Video Player Feature */}
      <div style={styles.videoSection}>
        {/* Placeholder for Video Player */}
        <div style={{color: 'white', textAlign: 'center'}}>
          <h3>Video Player</h3>
          <p>Match: Union II vs Red Bulls</p>
          <button style={{padding: '10px 20px', cursor: 'pointer'}}>Play / Pause</button>
        </div>
      </div>

      {/* RIGHT: Sidebar Feature */}
      <div style={styles.sidebar}>
        
        {/* Header / Tabs */}
        <div style={styles.header}>
          <button 
            style={{...styles.tabButton, ...(activeTab === 'insights' ? styles.activeTab : {})}}
            onClick={() => setActiveTab('insights')}
          >
            Coaching Insights
          </button>
          <button 
            style={{...styles.tabButton, ...(activeTab === 'actions' ? styles.activeTab : {})}}
            onClick={() => setActiveTab('actions')}
          >
            Actions
          </button>
        </div>

        {/* Content Area */}
        <div style={{padding: '20px', flex: 1, overflowY: 'auto'}}>
          
          {/* TAB 1: COACHING INSIGHTS */}
          {activeTab === 'insights' && (
            <div>
              <div style={styles.insightCard}>
                <h4 style={{margin: '0 0 10px 0'}}>AI Observation</h4>
                <p style={{fontSize: '13px', color: '#555', lineHeight: '1.5'}}>
                  Union II is struggling with progressive passes in the middle third (45% success rate). Consider reviewing shape during transition.
                </p>
              </div>

              <h4 style={{marginBottom: '10px'}}>Coach Notes</h4>
              <textarea 
                style={styles.textArea} 
                placeholder="Enter your analysis notes here..."
                value={coachNotes}
                onChange={(e) => setCoachNotes(e.target.value)}
              />
              <button style={{
                marginTop: '10px', 
                padding: '8px 16px', 
                backgroundColor: 'black', 
                color: 'white', 
                border: 'none', 
                borderRadius: '4px',
                cursor: 'pointer'
              }}>
                Save Notes
              </button>
            </div>
          )}

          {/* TAB 2: ACTIONS (The XML Data) */}
          {activeTab === 'actions' && (
            <div style={{margin: '-20px'}}> {/* Negative margin to offset padding for flush list */}
              {mockXMLData.map((item) => (
                <div key={item.id} style={styles.listItem} onMouseEnter={(e) => e.currentTarget.style.backgroundColor = '#f9f9f9'} onMouseLeave={(e) => e.currentTarget.style.backgroundColor = 'white'}>
                  <div style={{display: 'flex', alignItems: 'center'}}>
                    <span style={styles.timeTag}>{item.time}</span>
                    <div>
                      <span style={styles.playerText}>{item.player}</span>
                      <span style={styles.actionText}>{item.action}</span>
                    </div>
                  </div>
                  <div style={{color: '#ccc'}}>â–¶</div>
                </div>
              ))}
            </div>
          )}

        </div>
      </div>
    </div>
  );
};

export default MatchAnalysisDashboard;
